<?xml version="1.0" encoding="UTF-8"?>
<project name="dev-release" basedir=".">
  
  <fail unless="project.basedir" message="Property 'project.basedir' must be setted before loading build-bundle.xml"/>
  <fail unless="dev.path" message="Property 'dev.path' must be setted before loading build-bundle.xml"/>
      
  <property name="build-release.properties" value="${dev.path}/build/build-release.properties"/>
  <echo message="Load build-release.properties: ${dev.path}/build/build-release.properties" level="debug"/>
  <property file="${build-release.properties}"/>
  
  <!-- Import build-commons.xml -->
  <import file="build-commons.xml"/>
  
  <!-- Properties -->
  <property name="build.release.path" value="${build.path}/releases"/>
  
  <!-- Release version -->
  <condition property="release.fullversion" value="${release.version}">
    <and>
      <isset property="env.APPVEYOR_BUILD_NUMBER"/>
      <istrue value="${release.stable}"/>
    </and>
  </condition>
  <condition property="release.fullversion" value="${release.version}.${env.APPVEYOR_BUILD_NUMBER}">
    <and>
      <isset property="env.APPVEYOR_BUILD_NUMBER"/>
      <isfalse value="${release.stable}"/>
    </and>
  </condition>
  <condition property="release.fullversion" value="${release.version}-SNAPSHOT">
    <not><isset property="env.APPVEYOR_BUILD_NUMBER"/></not>
  </condition>
  
</project>
